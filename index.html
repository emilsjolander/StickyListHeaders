<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Stickylistheaders by emilsjolander</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Stickylistheaders</h1>
        <h2>An android library for section headers that stick to the top</h2>
        <a href="https://github.com/emilsjolander/StickyListHeaders" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>StickyListHeaders</h1>

<p>StickyListHeaders is an Android library that makes it easy to integrate section headers in your <code>ListView</code>. These section headers stick to the top like in the new People app of Android 4.0 Ice Cream Sandwich. This behavior is also found in lists with sections on iOS devices. This library can also be used for without the sticky functionality if you just want section headers.</p>

<p>StickyListHeaders actively supports android versions 2.3 (gingerbread) and above
That said, it should be compatible with much older versions of android as well but these are not actively tested.</p>

<p>Here is a short gif showing the functionality you get with this library:</p>

<p><img src="https://github.com/emilsjolander/StickyListHeaders/raw/master/demo.gif" alt="alt text" title="Demo gif"></p>

<h2>Goal</h2>

<p>The goal of this project is to deliver a high performance replacement to <code>ListView</code>. You should with minimal effort and time be able to add section headers to a list. This should be done via a simple to use api without any special features. This library will always priorities general use cases over special ones. This means that the library will add very few public methods to the standard <code>ListView</code> and will not try to work for every use case. While i will want to support even narrow use cases i will not do se if it comprimises the api or any other feature.</p>

<h2>Getting started</h2>

<h3>Installing the library</h3>

<p>First of all you will have to clone the library.</p>

<p>If you are using a unix-like terminal first use the following command to navigate to the directory or you choosing.</p>

<pre lang="shell"><code>cd ~/my/directory
</code></pre>

<p>After you are in the directory you want to clone the library to, use this command to clone StickyListHeaders.</p>

<pre lang="shell"><code>git clone https://github.com/emilsjolander/StickyListHeaders.git
</code></pre>

<p>Now that you have the library you will have to import it into eclipse (or any other ide but this is how you do it in eclipse).
Inn eclipse navigate the menus like this.</p>

<pre><code>file -&gt; new -&gt; project -&gt; android project from existing source
</code></pre>

<p>In the following dialog navigate to StickyListHeaders which you cloned to your computer in the previous steps.
Press finish and you should have the library in your workspace.</p>

<p>Now right click the project you want to use StickyListHeaders in and click on <code>properties</code>. In the dialog that appears you should navigate to <code>android</code> in the side menu. Now press the add button on the bottom right of the dialog and choose StickyListHeaders. Press ok and you are good to go!</p>

<h3>Code</h3>

<p>Ok lets start with your activities or fragments xml file. It might look something like this.</p>

<div class="highlight"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;com.emilsjolander.components.stickylistheaders.StickyListHeadersListView</span>
    <span class="na">android:id=</span><span class="s">"@+id/list"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">/&gt;</span>
</pre></div>

<p>Now in your activities <code>onCreate()</code> or your fragments <code>onCreateView()</code> you would want to do something like this</p>

<div class="highlight"><pre><span class="n">StickyListHeadersListView</span> <span class="n">stickyList</span> <span class="o">=</span> <span class="o">(</span><span class="n">StickyListHeadersListView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">list</span><span class="o">);</span>
<span class="n">MyAdapter</span> <span class="n">adapter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyAdapter</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="n">stickyList</span><span class="o">.</span><span class="na">setAdapter</span><span class="o">(</span><span class="n">adapter</span><span class="o">);</span>
</pre></div>

<p><code>MyAdapter</code> in the above example would look something like this if your list was a list of countries where each header was for a letter in the alphabet.</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyAdapter</span> <span class="kd">extends</span> <span class="n">BaseAdapter</span> <span class="kd">implements</span> <span class="n">StickyListHeadersAdapter</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">String</span><span class="o">[]</span> <span class="n">countries</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">LayoutInflater</span> <span class="n">inflater</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">TestBaseAdapter</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">inflater</span> <span class="o">=</span> <span class="n">LayoutInflater</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
        <span class="n">countries</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getResources</span><span class="o">().</span><span class="na">getStringArray</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">array</span><span class="o">.</span><span class="na">countries</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getCount</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">countries</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">getItem</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">countries</span><span class="o">[</span><span class="n">position</span><span class="o">];</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getItemId</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">position</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span> <span class="kd">public</span> <span class="n">View</span> <span class="n">getView</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="n">View</span> <span class="n">convertView</span><span class="o">,</span> <span class="n">ViewGroup</span> <span class="n">parent</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">ViewHolder</span> <span class="n">holder</span><span class="o">;</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">convertView</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">holder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ViewHolder</span><span class="o">();</span>
            <span class="n">convertView</span> <span class="o">=</span> <span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">test_list_item_layout</span><span class="o">,</span> <span class="n">parent</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
            <span class="n">holder</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span> <span class="n">convertView</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">text</span><span class="o">);</span>
            <span class="n">convertView</span><span class="o">.</span><span class="na">setTag</span><span class="o">(</span><span class="n">holder</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">holder</span> <span class="o">=</span> <span class="o">(</span><span class="n">ViewHolder</span><span class="o">)</span> <span class="n">convertView</span><span class="o">.</span><span class="na">getTag</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="n">holder</span><span class="o">.</span><span class="na">text</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">countries</span><span class="o">[</span><span class="n">position</span><span class="o">]);</span>

        <span class="k">return</span> <span class="n">convertView</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span> <span class="kd">public</span> <span class="n">View</span> <span class="n">getHeaderView</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="n">View</span> <span class="n">convertView</span><span class="o">,</span> <span class="n">ViewGroup</span> <span class="n">parent</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">HeaderViewHolder</span> <span class="n">holder</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">convertView</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">holder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HeaderViewHolder</span><span class="o">();</span>
            <span class="n">convertView</span> <span class="o">=</span> <span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">header</span><span class="o">,</span> <span class="n">parent</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
            <span class="n">holder</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span> <span class="n">convertView</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">text</span><span class="o">);</span>
            <span class="n">convertView</span><span class="o">.</span><span class="na">setTag</span><span class="o">(</span><span class="n">holder</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">holder</span> <span class="o">=</span> <span class="o">(</span><span class="n">HeaderViewHolder</span><span class="o">)</span> <span class="n">convertView</span><span class="o">.</span><span class="na">getTag</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="c1">//set header text as first char in name</span>
        <span class="n">String</span> <span class="n">headerText</span> <span class="o">=</span> <span class="s">""</span> <span class="o">+</span> <span class="n">countries</span><span class="o">[</span><span class="n">position</span><span class="o">].</span><span class="na">subSequence</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
        <span class="n">holder</span><span class="o">.</span><span class="na">text</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">headerText</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">convertView</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getHeaderId</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//return the first character of the country as ID because this is what headers are based upon</span>
        <span class="k">return</span> <span class="n">countries</span><span class="o">[</span><span class="n">position</span><span class="o">].</span><span class="na">subSequence</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">class</span> <span class="nc">HeaderViewHolder</span> <span class="o">{</span>
        <span class="n">TextView</span> <span class="n">text</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">class</span> <span class="nc">ViewHolder</span> <span class="o">{</span>
        <span class="n">TextView</span> <span class="n">text</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></div>

<p>Thats it! look through the api docs below to get know about things to customize and if you have any problems getting started please open an issue as it probably means the getting started guide need some improvement!</p>

<h2>Api</h2>

<h3>StickyListHeadersAdapter</h3>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">StickyListHeadersAdapter</span> <span class="kd">extends</span> <span class="n">ListAdapter</span> <span class="o">{</span>
    <span class="n">View</span> <span class="nf">getHeaderView</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="n">View</span> <span class="n">convertView</span><span class="o">,</span> <span class="n">ViewGroup</span> <span class="n">parent</span><span class="o">);</span>
    <span class="kt">long</span> <span class="nf">getHeaderId</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>

<p>Your adapter must implement this interface to function with <code>StickyListHeadersListView</code>.
<code>getHeaderId()</code> must return a unique integer for every section. A valid implementation for a list with alphabetical sections is the return the char value of the section that <code>position</code> is a part of.</p>

<p><code>getHeaderView()</code> works exactly like <code>getView()</code> in a regular <code>ListAdapter</code>.</p>

<h3>StickyListHeadersListView</h3>

<p>Headers are sticky by default but that can easily be changed with this setter. There is of course also a matching getter for the sticky property.</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAreHeadersSticky</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">areHeadersSticky</span><span class="o">);</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">getAreHeadersSticky</span><span class="o">();</span>
</pre></div>

<p>A OnHeaderClickListener is the header version of OnItemClickListener. This is the setter for it and the interface of the listener. The currentlySticky boolean flag indicated if the header that was clicked was sticking to the top at the time it was clicked.</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">setOnHeaderClickListener</span><span class="o">(</span><span class="n">OnHeaderClickListener</span> <span class="n">onHeaderClickListener</span><span class="o">);</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">OnHeaderClickListener</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onHeaderClick</span><span class="o">(</span><span class="n">StickyListHeadersListView</span> <span class="n">l</span><span class="o">,</span> <span class="n">View</span> <span class="n">header</span><span class="o">,</span> <span class="kt">int</span> <span class="n">itemPosition</span><span class="o">,</span> <span class="kt">long</span> <span class="n">headerId</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">currentlySticky</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>

<p>StickyListHeaders wraps the adapter passed to <code>setAdapter()</code> is it's own adapter, so <code>getAdapter()</code> will not return the adapter that <code>setAdapter()</code> was passed. It is often recomended that you keep a reference to the adapter in your activity/fragment but if this does not fit you there is a method to retrieve the original adapter.</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="n">StickyListHeadersAdapter</span> <span class="nf">getWrappedAdapter</span><span class="o">();</span>
</pre></div>

<p>This is a setter and getter for an internal attribute that controlls if the list should be drawn under the stuck header. The default value is false. If you want to see the list scroll under your header(the header should have a semi-transparent background) you will want to set this attribute to <code>true</code>.</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">setDrawingListUnderStickyHeader</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">drawingListUnderStickyHeader</span><span class="o">);</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isDrawingListUnderStickyHeader</span><span class="o">();</span>
</pre></div>

<h2>Limitations</h2>

<p>There is currently two limitations with this library, they both have to do with what kind of views the header can contain and the both only apply for when sticky header are activated.</p>

<p>The first limitation is that the header can as of now not contain anything that animates, the list will not crash but the animation will just not run as expected while the header is stuck. The other limitation is that it is currently not possible to have interactive elements in the header, Buttons, switches, etc. will only work when the header is not stuck.</p>

<h2>Contributing</h2>

<p>Contributions are very welcome. Now that this library has grown in popularity i have a hard time keeping upp with all the issues while tending to a multitude of other projects as well as school. So if you find a big in the library or want a feature and think you can fix it yourself, fork + pull request and i will greatly appreciate it!</p>

<p>I love getting pull requests for new features as well as bugs. However, when it comes to new features please also explain the use case and way you think the library should include it. If you don't want to start coding a feature without knowing if the feature will have chance of being included, open an issue and we can discuss the feature!</p>

<h2>License</h2>

<pre><code>Copyright 2013 Emil Sjölander

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/emilsjolander/StickyListHeaders/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/emilsjolander/StickyListHeaders/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/emilsjolander/StickyListHeaders"></a> is maintained by <a href="https://github.com/emilsjolander">emilsjolander</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
